
<!DOCTYPE html>
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Setup | aem-monitoring</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
		
		<link href="./css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />
		<link href="./css/site.css" rel="stylesheet" />
		
		<link href="http://yandex.st/highlightjs/7.3/styles/github.min.css" rel="stylesheet" />
		
		<link href="./css/lightbox.css" rel="stylesheet" />
		
		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />
		
		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

	</head>

	<body class="page-overview project-aem-monitoring" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<nav class="navbar navbar-default navbar-fixed-top">
				<div class="container">
					<div class="navbar-header">
				      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false">
				        <span class="sr-only">Toggle navigation</span>
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				        <span class="icon-bar"></span>
				      </button>
				    
					<a class="navbar-brand" href="./">AEM Monitoring</a>
					</div>
					<div class="collapse navbar-collapse">
						<ul class="nav navbar-nav navbar-right">
							<li><a href="https://github.com/OlsonDigital/aem-monitoring" title="GitHub" class="externalLink">GitHub </a></li>
							<li class="active"><a href="" title="Overview">Overview </a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="topologies.html" title="Topologies">Topologies </a></li>
									<li><a href="configuration.html" title="Configuration">Configuration </a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu">
										<a href="project-info.html" title="Project Information">Project Information </a>
										<ul class="dropdown-menu">
											<li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence </a></li>
											<li><a href="dependency-info.html" title="Dependency Information">Dependency Information </a></li>
											<li><a href="dependency-management.html" title="Dependency Management">Dependency Management </a></li>
											<li><a href="distribution-management.html" title="Distribution Management">Distribution Management </a></li>
											<li><a href="index.html" title="About">About </a></li>
											<li><a href="license.html" title="Licenses">Licenses </a></li>
											<li><a href="modules.html" title="Project Modules">Project Modules </a></li>
											<li><a href="plugin-management.html" title="Plugin Management">Plugin Management </a></li>
											<li><a href="plugins.html" title="Plugins">Plugins </a></li>
											<li><a href="team-list.html" title="Team">Team </a></li>
											<li><a href="source-repository.html" title="Source Code Management">Source Code Management </a></li>
											<li><a href="project-summary.html" title="Summary">Summary </a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
		</nav>
		
	<div class="container">
	
	<!-- Masthead
	================================================== -->

	
	
	<header class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="http://www.icfolson.com" id="bannerLeft"><img src="images/logo.jpg" alt="ICF Olson"></a>
				</div>
				<div class="pull-right">
										<a href="./" id="bannerRight"><h1>AEM Monitoring</h1></a>
					<p class="lead">Monitor your AEM applications</p>
				</div>
			</div>
		</div>


	
		</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <h2 id="Setup">Setup</h2> 
 <p>AEM Monitoring can be run in several possible configurations. See <a href="topologies.html">Supported Topologies</a> for a comparison on each and setup instructions. Also see <a href="configuration.md">Configurations</a> for a listing of the configuration options available in each topology.</p>
</div> 
<div class="section"> 
 <h2 id="Usage">Usage</h2> 
 <p>Although AEM Monitoring provides several types monitoring of out of the box, adding custom integrations is simple. The primary service interface for recording metrics is <a href="../core/src/main/java/com/icfolson/aem/monitoring/core/service/MonitoringService.java">MonitoringService</a>. Callers can leverage this service to record events, metrics, and counters:</p> 
 <div class="source"> 
  <pre>import com.icfolson.aem.monitoring.core.model.base.DefaultMonitoringEvent;
import com.icfolson.aem.monitoring.core.model.MonitoringEvent;
import com.icfolson.aem.monitoring.core.model.QualifiedName;
import com.icfolson.aem.monitoring.core.service.MonitoringService;

public abstract class MonitoredComponent {
    
    private static final QualifiedName SOME_VALUE = new QualifiedName(&quot;some&quot;, &quot;value&quot;);
    private static final QualifiedName EVENT_NAME = new QualifiedName(&quot;event&quot;);
    private static final QualifiedName THING_DONE = new QualifiedName(&quot;thing&quot;, &quot;done&quot;);
    
    @Reference
    private MonitoringService monitoringService;
    
    public void doThing(final float someValue, final String anotherValue) {
        monitoringService.recordMetric(SOME_VALUE, someValue);
        
        final MonitoringEvent event = new DefaultMonitoringEvent(EVENT_NAME);
        event.setProperty(&quot;foo&quot;, someValue);
        event.setProperty(&quot;bar&quot;, anotherValue);
        
        final long start = System.currentTimeMillis();
        final String returnValue = actuallyDoThing();
        final long end = System.currentTimeMillis();
        
        event.setProperty(&quot;duration&quot;, end - start);
        event.setProperty(&quot;return&quot;, returnValue);
        monitoringService.recordEvent(event);
        
        monitoringService.incrementCounter(THING_DONE);
    }
    
    protected abstract String actuallyDoThing();
    
}

</pre>
 </div>
</div> 
<div class="section"> 
 <h2 id="Extension_Points">Extension Points</h2> 
 <ul> 
  <li>No configuration required for adding new data categories â€“ just code and go</li> 
  <li>Modify/filter/augment monitoring data via the MonitoringFilter service interface</li> 
  <li>Send monitoring data to a custom endpoint via the MonitoringWriter service interface</li> 
  <li>Add custom properties to each system of origin to simplify querying</li> 
  <li>Database is available for custom queries: add reporting, alarms, etc.</li> 
 </ul>
</div> 
<div class="section"> 
 <h2 id="Limits">Limits</h2> 
 <p>The included test bundle generates a consistent configurable load. The default settings will generate: - 60 seconds of consistent events - at 100 events per seconds (6,000 events) - each event 10 string properties and 2 numeric properties (72,000 property instances)</p> 
 <p>This test has been extended to as many as 100K events over an hour, with minimal CPU or memory load witnessed, although this rate does use roughly 50M of disk space during that hour. For that reason, it is recommended that you design each event such that they will be fired less than 500K times per day, and that adequate disk space be considered during development/deployment. Some other limits include: - Names (for events, event properties, metrics, and counters) should be limited to 200 characters - Values for event properties are either strings less that 4000 characters, or floating-point values - Metric values are floating-point values - Counter increments are 64-bit integers (but default to 1) - System properties (constant values representing a system of origin) have the same limitations as event properties</p>
</div> 
<div class="section"> 
 <h2 id="Monitoring_Data_Types">Monitoring Data Types</h2> 
 <p>AEM Monitoring provides multiple means of capturing analytics info. Each type has different storage and visualization options. Events are a collection of key/value pairs, metrics are real values, and counters are integers. All types are defined by a qualified name and a timestamp.</p>
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->
	
	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span4 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">User Guide</li>
						<li>
							<a href="topologies.html" title="Topologies">Topologies </a>
						</li>
						<li>
							<a href="configuration.html" title="Configuration">Configuration </a>
						</li>
					</ul>
				</div>
				<div class="span5 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Project Documentation</li>
						<li>
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
		
	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.icfolson.com">ICF Olson</a>. All Rights Reserved.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->

	<!-- Fallback jQuery loading from Google CDN:
	     http://stackoverflow.com/questions/1014203/best-way-to-use-googles-hosted-jquery-but-fall-back-to-my-hosted-library-on-go -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script type="text/javascript">
		if (typeof jQuery == 'undefined')
		{
			document.write(unescape("%3Cscript src='./js/jquery-1.8.3.min.js' type='text/javascript'%3E%3C/script%3E"));
		}
	</script>
	
	<script src="./js/bootstrap.min.js"></script>
	<script src="./js/lightbox.js"></script>
	<script src="./js/jquery.smooth-scroll.min.js"></script>
	<!-- back button support for smooth scroll -->
	<script src="./js/jquery.ba-bbq.min.js"></script>
	<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>
	<script src="https://use.typekit.net/rya5bvi.js"></script><script>try{Typekit.load({ async: true });}catch(e){}</script>
	
	</body>
</html>
